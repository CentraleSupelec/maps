# Draw: processing drawing files for Campusmap

- [Draw: processing drawing files for Campusmap](#draw-processing-drawing-files-for-campusmap)
  - [Info](#info)
  - [Usage](#usage)
    - [Deleting elements](#deleting-elements)
  - [Contents](#contents)
  - [TODO](#todo)

## Info

This python application is used to process the drawing files `*.json` generated by the Web Interface of Campusmap to make them usable by the Web app.

## Usage

Make your drawing with the Web Interface of Campusmap and download the `*.json` files.

Move the `*.json` files in `drawings/` directory of this app.

Make sure that `icons.json` is in the `draw/` directory.

Then, run the app with the following commands:

```bash
pip install -r requirements.txt
python draw.py --file <path_to_draw_json> --icons icons.json --data_dir ../src/data
```

Finally move the generated JSONs to `src/data` directory of the Web app:

```bash
python draw.py --move_to ../src/data
```

Running the Web app, you should see your changes.

For help, run:

```bash
python draw.py --help
```

### Deleting elements

You can delete one element with its URL (get the URL from the Web interface):

Generate the new data without the element we want to delete:

```bash
python draw.py delete --url <url> --data_dir ../src/data
```

Move the generated data to `src/data` directory of the Web app:

```bash
python draw.py --move_to ../src/data
```

**OR** delete all elements on a single floor of one building:

Generate the new data without the elements we want to delete:

```bash
python draw.py delete --floor <floor_number> --building <building:bouygues,breguet,eiffel,metz,rennes> --data_dir ../src/data
```

**Move** the generated data to `src/data` directory of the Web app:

```bash
python draw.py --move_to ../src/data
```

## Contents

```TXT
data_proc
├── drawings/
│    └── README.md
├── generated_data/  # (generated by draw.py)
├── .gitignore
├── delete.py
├── draw.py          # main script
├── format_data.py
├── get_data.py
├── icons.json
├── leaflet_geojson.py
├── README.md
├── requirements.txt
├── tools.py
└── update_data.py
```

## TODO

- Verify that aliases are unique
- Feature : Ability to remove elements
